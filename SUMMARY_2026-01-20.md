# Survey Assistant - Project Summary
**Date:** January 20, 2026

## What We Built
A web-based chat interface for Nira Data clients to design survey questions with AI assistance.

**Live URL:** https://nira-survey-assistant.onrender.com (hosted on Render)

**GitHub:** https://github.com/fdeveaux-niradata/survey-assistant

---

## Key Technical Details

### Stack
- **Frontend:** Plain HTML/CSS/JS (in `/public` folder)
- **Backend:** Node.js + Express (`server.js`)
- **AI:** OpenAI API (GPT-5.2 model)
- **Hosting:** Render (free tier) - Note: Vercel didn't work well with Express

### Key Files
| File | Purpose |
|------|---------|
| `server.js` | Main backend with system prompt and API endpoints |
| `public/index.html` | Chat interface |
| `public/script.js` | Frontend logic |
| `public/styles.css` | Nira Data branding (dark navy theme) |
| `nira_faq.md` | Platform FAQ (character limits, etc.) |
| `.env` | OpenAI API key (not in git) |

---

## Nira Data Survey Requirements (CRITICAL)

These are baked into the system prompt:

| Requirement | Limit |
|-------------|-------|
| Question length | Under 100 characters (including spaces) |
| Answer option length | Under 50 characters each |
| Number of answer options | Max 6 (to avoid scrolling) |
| Question types | Single-choice and multiple-choice ONLY |
| Links | NOT allowed |
| Survey length | 15-20 questions recommended |

### Important Survey Design Rules
1. **Balanced wording:** Always "Do you support or oppose X?" not just "Do you support X?"
2. **Neutral vs Don't Know:** Choose ONE, not both (having both is possible but not default)
3. **No jargon:** Language must be accessible to general public
4. **Mobile-first:** All surveys optimized for smartphones

---

## Features Implemented

- ✅ Chat interface with Nira Data branding
- ✅ Research question explanation (triggered by first button)
- ✅ Diagnostic checklist flow
- ✅ Character limit validation
- ✅ Export to Word/PDF (Summary and Transcript)
- ✅ Home button to restart conversation

---

## Still To Do / Future Improvements

1. **Add good/bad examples** to system prompt (we discussed but didn't implement)
2. **Guidance on "Don't Know" option** - pros/cons for clients
3. **Single vs multiple choice guidance** - when to use each
4. **Images:** "Discuss with Nira Data team"
5. **Sensitive topics:** "Discuss with Nira Data team"
6. **Set responses** for other buttons ("Review my draft survey question", "Learn about requirements")
7. **Temperature setting** - currently 0.7, could lower for more consistency
8. **Update `assistant_instructions.Rmd`** - still says 110 characters, should be 100

---

## Deployment Notes

### Render (RECOMMENDED)
- Works well with Express apps
- Free tier sleeps after 15min inactivity (first request takes ~30s to wake)
- Environment variable: `OPENAI_API_KEY`

### Vercel (DIDN'T WORK)
- Struggled with Express routing
- Would need to restructure as serverless functions
- Left some `/api` folder code that could be cleaned up

### Local Development
```bash
cd "/Users/fred/Library/CloudStorage/Dropbox/Dalia Consulting/Nira Data/Survey_Assistant"
npm install
npm start
# Open http://localhost:3000
```

---

## Git Setup Reminder

You have two GitHub accounts. See `GIT_SETUP.md` for full details.

**For Nira Data repos:**
```bash
git remote set-url origin git@github-niradata:fdeveaux-niradata/REPO_NAME.git
```

---

## Questions to Address Next Time

1. What good/bad examples should we add?
2. Finalize guidance on "Don't know" vs neutral options
3. Should we add example prompts for specific industries?
4. Do we need user authentication?
5. Should conversation history persist (currently resets on server restart)?
